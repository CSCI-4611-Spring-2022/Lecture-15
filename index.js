var y=Object.defineProperty;var A=(h,e,i)=>e in h?y(h,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[e]=i;var s=(h,e,i)=>(A(h,typeof e!="symbol"?e+"":e,i),i);import{W as E,S as C,P as D,C as L,V as Z,G as I,M as X,A as O,B as c,a as o,b as m,c as P,d as H,D as z,e as G,E as p,f as Y}from"./vendor.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerpolicy&&(t.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?t.credentials="include":a.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(a){if(a.ep)return;a.ep=!0;const t=i(a);fetch(a.href,t)}};W();class k{constructor(e=60,i=1.333,r=1,a=1e3){s(this,"aspectRatio");s(this,"fov");s(this,"znear");s(this,"zfar");s(this,"renderer");s(this,"scene");s(this,"camera");s(this,"clock");this.fov=e,this.aspectRatio=i,this.znear=r,this.zfar=a,this.renderer=new E,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",()=>{this.resize()},!1),window.addEventListener("mousedown",t=>{this.onMouseDown(t)}),window.addEventListener("mouseup",t=>{this.onMouseUp(t)}),window.addEventListener("mousemove",t=>{this.onMouseMove(t)}),window.addEventListener("wheel",t=>{this.onMouseWheel(t)}),window.addEventListener("keydown",t=>{this.onKeyDown(t)}),window.addEventListener("keyup",t=>{this.onKeyUp(t)}),this.scene=new C,this.camera=new D(this.fov,this.aspectRatio,this.znear,this.zfar),this.clock=new L}start(){this.createScene(),this.mainLoop()}mainLoop(){this.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(()=>this.mainLoop())}resize(){this.renderer.setSize(window.innerWidth,window.innerHeight);var e=new Z;this.renderer.getViewport(e);var i=window.innerWidth/window.innerHeight;this.aspectRatio>i?this.renderer.setViewport(0,(window.innerHeight-window.innerWidth/this.aspectRatio)/2,window.innerWidth,window.innerWidth/this.aspectRatio):this.renderer.setViewport((window.innerWidth-window.innerHeight*this.aspectRatio)/2,0,window.innerHeight*this.aspectRatio,window.innerHeight)}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onMouseWheel(e){}onKeyDown(e){}onKeyUp(e){}}class n extends I{constructor(e){super();s(this,"name");s(this,"defaultMaterial");s(this,"debugHelper");this.name=e,this.defaultMaterial=new X,this.defaultMaterial.wireframe=!1,this.debugHelper=new O(.07),this.debugHelper.visible=!1,this.add(this.debugHelper)}createMeshes(){if(this.name=="root"){var e=new O(.05);this.add(e);const i=new c(.5,.05,.5),r=new o(i,this.defaultMaterial);r.translateY(.025),this.add(r);const a=new m(.1,16,6,0,Math.PI*2,0,Math.PI/2),t=new o(a,this.defaultMaterial);t.translateY(.05),this.add(t),this.add(new n("upperArm"))}else if(this.name=="upperArm"){const i=new c(.05,.5,.05),r=new o(i,this.defaultMaterial);r.translateY(.25),this.add(r);const a=new m(.05),t=new o(a,this.defaultMaterial);t.translateY(.5),this.add(t),this.add(new n("middleArm"))}else if(this.name=="middleArm"){this.translateY(.5),this.rotateZ(45*Math.PI/180);const i=new c(.05,.4,.05),r=new o(i,this.defaultMaterial);r.translateY(.2),this.add(r);const a=new m(.05),t=new o(a,this.defaultMaterial);t.translateY(.4),this.add(t),this.add(new n("lowerArm"))}else if(this.name=="lowerArm"){this.translateY(.4),this.rotateZ(45*Math.PI/180);const i=new c(.05,.4,.05),r=new o(i,this.defaultMaterial);r.translateY(.2),this.add(r);const a=new m(.05),t=new o(a,this.defaultMaterial);t.translateY(.4),this.add(t),this.add(new n("endEffector"))}else if(this.name=="endEffector"){this.translateY(.4),this.rotateZ(45*Math.PI/180);const i=new P(.025,.2,16),r=new o(i,this.defaultMaterial);r.translateY(.125),this.add(r)}this.children.forEach(i=>{i instanceof n&&i.createMeshes()})}setRotation(e,i){this.name==e?this.setRotationFromEuler(i):this.children.forEach(r=>{r instanceof n&&r.setRotation(e,i)})}setDebugMode(e){this.defaultMaterial.wireframe=e,this.debugHelper.visible=e,this.children.forEach(i=>{i instanceof n&&i.setDebugMode(e)})}}class x extends k{constructor(){super(60,1920/1080,.1,10);s(this,"mouseDrag");s(this,"debugMode");s(this,"cameraOrbitX");s(this,"cameraOrbitY");s(this,"cameraDistance");s(this,"robotRoot");s(this,"upperYRotation");s(this,"upperZRotation");s(this,"middleZRotation");s(this,"lowerZRotation");s(this,"endEffectorZRotation");this.mouseDrag=!1,this.debugMode=!1,this.cameraOrbitX=0,this.cameraOrbitY=0,this.cameraDistance=0,this.robotRoot=new n("root"),this.upperYRotation=0,this.upperZRotation=0,this.middleZRotation=0,this.lowerZRotation=0,this.endEffectorZRotation=0}createScene(){this.cameraDistance=1.5,this.camera.position.set(0,0,this.cameraDistance),this.camera.lookAt(0,0,0),this.camera.up.set(0,1,0);var e=new H("white",.3);this.scene.add(e);var i=new z("white",.6);i.position.set(0,2,1),this.scene.add(i);var r=new G,a=r.addFolder("Upper Arm Controls");a.open();var t=a.add(this,"upperYRotation",-180,180);t.name("swivel"),t.onChange(l=>{this.updateUpperArm()});var d=a.add(this,"upperZRotation",-45,45);d.name("bend"),d.onChange(l=>{this.updateUpperArm()});var u=r.addFolder("Middle Arm Controls");u.open();var w=u.add(this,"middleZRotation",-135,135);w.name("bend"),w.onChange(l=>{this.updateMiddleArm()});var f=r.addFolder("Lower Arm Controls");f.open();var M=f.add(this,"lowerZRotation",-135,135);M.name("bend"),M.onChange(l=>{this.updateLowerArm()});var b=r.addFolder("End Effector Controls");b.open();var g=b.add(this,"endEffectorZRotation",-90,90);g.name("bend"),g.onChange(l=>{this.updateEndEffector()});var v=r.addFolder("Debugging");v.open();var R=v.add(this,"debugMode");R.name("Debug Mode"),R.onChange(l=>{this.toggleDebugMode(l)}),this.robotRoot.createMeshes(),this.robotRoot.translateY(-.6),this.scene.add(this.robotRoot)}update(e){}updateUpperArm(){this.robotRoot.setRotation("upperArm",new p(0,this.upperYRotation*Math.PI/180,this.upperZRotation*Math.PI/180))}updateMiddleArm(){this.robotRoot.setRotation("middleArm",new p(0,0,this.middleZRotation*Math.PI/180))}updateLowerArm(){this.robotRoot.setRotation("lowerArm",new p(0,0,this.lowerZRotation*Math.PI/180))}updateEndEffector(){this.robotRoot.setRotation("endEffector",new p(0,0,this.endEffectorZRotation*Math.PI/180))}toggleDebugMode(e){this.robotRoot.setDebugMode(e)}onMouseDown(e){e.target.localName=="canvas"&&(this.mouseDrag=!0)}onMouseUp(e){this.mouseDrag=!1}onMouseMove(e){this.mouseDrag&&(this.cameraOrbitX+=e.movementY,this.cameraOrbitX<90||this.cameraOrbitX>270?this.cameraOrbitY+=e.movementX:this.cameraOrbitY-=e.movementX,this.cameraOrbitX>=360?this.cameraOrbitX-=360:this.cameraOrbitX<0&&(this.cameraOrbitX+=360),this.cameraOrbitY>=360?this.cameraOrbitY-=360:this.cameraOrbitY<0&&(this.cameraOrbitY+=360),this.updateCameraOrbit())}onMouseWheel(e){this.cameraDistance+=e.deltaY/1e3,this.updateCameraOrbit()}updateCameraOrbit(){var e=new Y().makeRotationY(-this.cameraOrbitY*Math.PI/180);e.multiply(new Y().makeRotationX(-this.cameraOrbitX*Math.PI/180)),this.camera.position.set(0,0,this.cameraDistance),this.camera.applyMatrix4(e),this.cameraOrbitX<90||this.cameraOrbitX>270?this.camera.up.set(0,1,0):this.cameraOrbitX>90&&this.cameraOrbitX<270?this.camera.up.set(0,-1,0):this.cameraOrbitX==270?this.camera.up.set(Math.sin(-this.cameraOrbitY*Math.PI/180),0,Math.cos(-this.cameraOrbitY*Math.PI/180)):this.camera.up.set(-Math.sin(-this.cameraOrbitY*Math.PI/180),0,-Math.cos(-this.cameraOrbitY*Math.PI/180)),this.camera.lookAt(0,0,0)}}var U=new x;U.start();
